<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Login ERP</title>
</head>

<body>

<h2>LOGIN ERP PRO ðŸ”¥</h2>

<input id="username" placeholder="UsuÃ¡rio">
<input id="password" type="password" placeholder="Senha">

<button onclick="login()">Entrar</button>

<script>

async function login(){

  const username = document.getElementById("username").value;
  const password = document.getElementById("password").value;

  const res = await fetch("/login",{
    method:"POST",
    headers:{
      "Content-Type":"application/json"
    },
    body:JSON.stringify({username,password})
  });

  const data = await res.json();

  if(!res.ok){
    alert(data.error || "Erro login");
    return;
  }

  /* ðŸ”¥ SALVA TOKEN ERP */
  localStorage.setItem("token",data.token);

  /* REDIRECIONA */
  window.location.href="dashboard.html";
}

</script>

</body>
</html>
